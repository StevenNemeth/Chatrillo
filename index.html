<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title></title>
  <meta name="author" content="">
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="css/style.css" rel="stylesheet">
</head>
<script src = "/socket.io/socket.io.js"></script>
<script>
  var socket = io()
  var userlist
  var loginStatus = false
  function login(){
    console.log('hello')
    socket.emit('login', document.getElementById('userName').value)
    loginStatus = true
  }
  socket.on('userlist', function(data){
    userlist = data
    if (loginStatus){
      updateUI(data)
    }
  })
  function updateUI(data){
    var element = document.getElementById('roomForm');
    if(element){
      element.parentNode.removeChild(element);
    }
    
    var temp = document.getElementById('userList')
    temp.innerHTML = ''
    for (var i = 0; i < data.users.length; i++){
      var whatever = document.createElement('p') 
      whatever.textContent = data.users[i]
      // ["Steve", "Eric"]
      temp.appendChild(whatever)

    }
  console.log(data)
  }
</script>
<body>

<form id="roomForm">
  <label for="roomName">Room Name</label><br/>
  <input type="text" id="roomName"><br>
  <label for="userName">Username</label><br/>
  <input type="text" id="userName"><br>
  <button type="button" id="connect" onclick=login()>Connect</button>
</form>
<div id=userList>

</div>
</body>

</html>